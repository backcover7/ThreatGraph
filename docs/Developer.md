# Structure
## FrontEnd
app -> nextjs app to render excalidraw
excalidraw -> integrate excalidraw

## Logic
modeling -> create and scan logic
tests -> excalidraw file for testingd

## Validation
- Component Count Validation RuleComponent Count Validation Rule
  - At least 2 components should be present in the diagram.
- Component Overlap Validation RuleComponent Overlap Validation Rule
  - Check if two components are overlapping. Applicable to non Trust Boundary components.
- Component and Trust Boundary Overlap Validation RuleComponent and Trust Boundary Overlap Validation Rule
  - Check if a component overlaps with a Trust Boundary. A component should be inside or outside a Trust Boundary.
- Empty Line Text Validation RuleEmpty Line Text Validation Rule
  - Validate if a line has an associated Text.
- Empty Component Text or Title Validation RuleEmpty Component Text or Title Validation Rule
  - Validate if a Component has an associated Text or Title.
- Model Connectivity Validation RuleModel Connectivity Validation Rule
  - Validate if there are isolated islands of components. All the components should be connected.
- Orphan Component Validation RuleOrphan Component Validation Rule
  - Check if a component is connected with another component.
- Orphan Line Validation RuleOrphan Line Validation Rule
  - Check if a line has component at both the ends.
- Orphan Trust Boundary Validation RuleOrphan Trust Boundary Validation Rule
  - Checks if there is another component (which is not a trust boundary) inside a trust boundary. If a trust boundary contains another trust boundary. then internal trust boundary should contain a non trust boundary component.
- Protocol Validation RuleProtocol Validation Rule
  - Check if a line has a supported protocol attached in the desired format.
- Trust Boundary Connection Validation RuleTrust Boundary Connection Validation Rule
  - Trust Boundaries must not have connections originating or ending. Connections should cut a Trust boundary.
- Trust Boundary Count Validation RuleTrust Boundary Count Validation Rule
  - At least one Trust Boundary should be present.
- Trust Boundary Flow Crossing Validation RuleTrust Boundary Flow Crossing Validation Rule
  - Diagram should have data flow cutting the Trust Boundaries.
- Trust Boundary Overlap Validation RuleTrust Boundary Overlap Validation Rule
  - Trust Boundaries must not overlap (One can be inside others).
- Undirected Line Validation RuleUndirected Line Validation Rule
  - Diagram should not have undirected line(s).
- Unique Component Description Validation RuleUnique Component Description Validation Rule
  - Validate that components have unique descriptions or titles.
- Unique Line Description Validation RuleUnique Line Description Validation Rule
  - Validate that lines have unique texts.

## TODOs
- Two or two more processes on a dataflow
- bidirectional dataflow?
- Export threats to SAST
- Import code sources from results generated by programming AST agents or semgrep agents
- Map threats to code sources
- Revenue Map
    - Community Edition
        - Up to 5 threat models
    - Plus Edition
        - collaboration
        - threat model update
- UML?
- AI switch (8B for community but with fine tuned prompt)
- accept searching icon, uml and ask ai and upload sketch
- Add Threat
    - Adjust classification in a model like STRIDE based on description
- Issue / vulnerability tracker
- questionnaire？
- allow create new elements for community but not including compliance which is only customized for pro
- CI/CD plugin like Jira, OA, …
- UI progress for loading templates

- Plus Features
  - Collaboration
  - Assignment
  - SLA
  - flowing diagram
  - stretch to threat model using AI
  - 2.5D effection like https://samy.pl/slipstream/